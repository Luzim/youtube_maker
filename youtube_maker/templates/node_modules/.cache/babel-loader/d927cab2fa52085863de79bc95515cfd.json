{"ast":null,"code":"var _jsxFileName = \"/home/luzim/Documentos/Git/youtube_maker/youtube_maker/templates/src/pages/Upload.js\";\nimport React, { Component } from 'react';\nimport api from '../services/api';\nimport './Upload.css';\nimport { Progress } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\n\nclass Upload extends Component {\n  //Defying state of selected file\n  constructor(props) {\n    super(props);\n\n    this.maxSelectFile = e => {\n      let files = e.target.files;\n\n      if (files.length > 1) {\n        const msg = 'Only 1 file';\n        e.target.value = null;\n        toast.warn(msg);\n        return false;\n      }\n\n      return true;\n    };\n\n    this.handleChange = e => {\n      var file = e.target.files;\n\n      if (this.maxSelectFile(e)) {\n        this.setState({\n          selectedFile: file,\n          loaded: 0\n        });\n      }\n    };\n\n    this.handleSubmit = async ({\n      history\n    }) => {\n      console.log('aaaaaaaaa', this.state.selectedFile);\n      const data = new FormData();\n      data.append(\"file\", this.state.selectedFile[0]);\n      console.log(data);\n      const response = await api.post('upload/', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: ProgressEvent => {\n          this.setState({\n            loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n          });\n        }\n      }).then(res => {\n        toast.success('Success');\n      }).catch(err => {\n        toast.error('Fail');\n      });\n      const id = response.data.id;\n      history.push(\"/dev/\".concat(id));\n    };\n\n    this.state = {\n      selectedFile: [],\n      loaded: 0\n    };\n  } //Verifying if user send 1 file to upload\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"login-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      multiple: true,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Progress, {\n      max: \"100\",\n      color: \"success\",\n      value: this.state.loaded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, Math.round(this.state.loaded, 2), \"%\")), React.createElement(\"button\", {\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Send Your File\")));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/home/luzim/Documentos/Git/youtube_maker/youtube_maker/templates/src/pages/Upload.js"],"names":["React","Component","api","Progress","ToastContainer","toast","Upload","constructor","props","maxSelectFile","e","files","target","length","msg","value","warn","handleChange","file","setState","selectedFile","loaded","handleSubmit","history","console","log","state","data","FormData","append","response","post","headers","onUploadProgress","ProgressEvent","total","then","res","success","catch","err","error","id","push","render","Math","round"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport api from '../services/api';\nimport './Upload.css';\nimport {Progress} from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nclass Upload extends Component{\n    //Defying state of selected file\n    constructor(props){\n        super(props)\n        this.state = {\n            selectedFile: [],\n            loaded:0\n        }\n    }\n    //Verifying if user send 1 file to upload\n    maxSelectFile=(e)=>{\n        let files = e.target.files;\n        if(files.length > 1){\n            const msg = 'Only 1 file';\n            e.target.value = null;\n            toast.warn(msg)\n            return false;\n        }\n        return true;\n    }\n\n    handleChange=e=>{\n        var file = e.target.files\n        if(this.maxSelectFile(e)){\n            this.setState({\n            selectedFile: file,\n            loaded: 0\n            })\n        }\n    }\n    handleSubmit=async ({history})=>{\n        \n        console.log('aaaaaaaaa',this.state.selectedFile);\n        const data = new FormData();\n        data.append(\"file\", this.state.selectedFile[0]);\n        console.log(data);\n        const response = await api.post('upload/', data,{\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            },\n            onUploadProgress: ProgressEvent => {\n                this.setState({\n                    loaded: (ProgressEvent.loaded / ProgressEvent.total*100),\n                })\n            },             \n        })\n        .then( res => {\n            toast.success('Success');\n        })\n        .catch(err => {\n            toast.error('Fail');\n        })\n        const { id } = response.data;\n\n        history.push(`/dev/${id}`);\n    }\n\n    render(){\n        return (\n            \n            <div className= \"login-container\">\n                \n                <form  onClick={this.handleSubmit}>\n                    <input\n                        type=\"file\"\n                        multiple onChange={this.handleChange}                        \n                        />\n                    <div >\n                        <ToastContainer />\n                        <Progress max=\"100\" color=\"success\" value={this.state.loaded} >{Math.round(this.state.loaded,2) }%</Progress>\n        \n                    </div>\n                     \n                    <button  type=\"button\" >Send Your File</button> \n                </form>            \n            </div>\n          \n        );\n    }\n}\nexport default Upload;"]},"metadata":{},"sourceType":"module"}